(this["webpackJsonptimekeeper-front-end-react"]=this["webpackJsonptimekeeper-front-end-react"]||[]).push([[0],{30:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),u=n(7),l=n(8),i=n(10),s=n(9),p=n(11),m=n(16),h=function(e){return r.a.createElement("button",{onClick:e.addTimes},"ADD")},f=function(e){return r.a.createElement("button",{onClick:e.updateTimes},"UPDATE")},d=function(e){return r.a.createElement("button",{onClick:e.deleteTimes},"DELETE")},O=n(2),E="http://localhost:3000";function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={clockIn:"",clockOut:"",capturedDate:n.props.day},n.findDay=function(){if(n.props.user){var e=n.props.user.user_times.find((function(e){return parseInt(e.date_of_times)===n.state.capturedDate}));if(e&&e.clock_in.slice(11,16)!==n.state.clockIn)return e}},n.fillInTimes=function(){var e=n.findDay();e&&(console.log(e),n.setState((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{clockIn:e.clock_in.slice(11,16),clockOut:e.clock_out.slice(11,16)})})))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fillInTimes()}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.fillInTimes()}},{key:"handleOnChange",value:function(e){var t=this;this.setState(Object(m.a)({},e.target.name,e.target.value),(function(){return console.log(t.state)}))}},{key:"handleOnAdd",value:function(e){e.preventDefault(),this.props.addTime(this.props.user.id,this.state.clockIn,this.state.clockOut,this.state.capturedDate)}},{key:"handleOnDelete",value:function(e){e.preventDefault(),this.props.deleteTime(this.props.user.id,this.state.capturedDate,this.state.clockIn,this.state.clockOut),this.setState({clockIn:"",clockOut:""})}},{key:"handleOnUpdate",value:function(e){e.preventDefault(),this.props.updateTime(this.props.user.id,this.state.capturedDate,this.state.clockIn,this.state.clockOut)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"item"},r.a.createElement("form",null,r.a.createElement("span",null,this.props.day),r.a.createElement("label",null,"Clock In"),r.a.createElement("input",{type:"time",value:this.state.clockIn,name:"clockIn",placeholder:"Clock In",className:"clockIn",onChange:function(t){return e.handleOnChange(t)}}),r.a.createElement("label",null,"Clock Out"),r.a.createElement("input",{type:"time",value:this.state.clockOut,name:"clockOut",placeholder:"Clock Out",className:"clockOut",onChange:function(t){return e.handleOnChange(t)}}),r.a.createElement("div",{className:"btnActions"},r.a.createElement(h,{addTimes:function(t){return e.handleOnAdd(t)}}),r.a.createElement(f,{updateTimes:function(t){return e.handleOnUpdate(t)}}),r.a.createElement(d,{deleteTimes:function(t){return e.handleOnDelete(t)}}))))}}]),t}(a.Component),k=Object(O.b)((function(e){return{user:e.user}}),{addTime:function(e,t,n,a){return function(r){fetch("".concat(E,"/user_times"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({clock_in:t,clock_out:n,date_of_times:a,user_id:e})}).then((function(e){return console.log(e),e.json()})).then((function(e){if(console.log(e),!e.err_message)return alert("Timestamp is now added."),r({type:"ADD_TIME",payload:e});alert(e.err_message)}))}},updateTime:function(e,t,n,a){return function(r){fetch("".concat(E,"/user_times/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user_id:e,clock_in:n,clock_out:a,date_of_times:t})}).then((function(e){return e.json()})).then((function(e){return alert("Timestamp has been updated."),r({type:"UPDATE_TIME",payload:e})}))}},deleteTime:function(e,t,n,a){return function(r){fetch("".concat(E,"/user_times/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user_id:e,clock_in:n,clock_out:a,date_of_times:t})}).then((function(e){return e.json()})).then((function(e){return alert("Timestamp has been deleted."),r({type:"DELETE_TIME",payload:e})}))}}})(y),j=Object(O.b)((function(e){return{user:e.user}}))((function(e){var t=function(e){var t,n;return e/1e3%60,t=e/6e4%60,n=Math.floor(e/36e5%24),"".concat(n," HOURS, ").concat(t," MINUTES")};return r.a.createElement("header",null,r.a.createElement("h3",null,"Calculate time in a month total: ",r.a.createElement("span",{id:"currentTime"},e.user&&function(e){console.log(e);var n=e.user_times.reduce((function(e,t){return console.log(t.clock_out.slice(11,16)),e+function(e,t){if(e=e.split(":"),(t=t.split(":"))[0]="00"===t[0]?"24":t[0],t[0]<e[0])return alert("Clock In time must be before the clock out time."),0;var n=new Date(0,0,0,e[0],e[1],0),a=new Date(0,0,0,t[0],t[1],0);return Math.abs(n.getTime()-a.getTime())}(t.clock_in.slice(11,16),t.clock_out.slice(11,16))}),0);return t(n)}(e.user))))})),g=n(14),v=Object(O.b)((function(e){return{user:e.user}}),{logoutUser:function(e){return e.push("/"),localStorage.clear(),function(e){return e({type:"LOGOUT_USER"})}}})(Object(g.e)((function(e){return r.a.createElement("div",{id:"welcomeUser"},r.a.createElement("p",null,"Welcome, ",e.user&&e.user.name),r.a.createElement("button",{onClick:function(){return e.logoutUser(e.history)}},"logout"))}))),_=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderInputs",value:function(){for(var e=[],t=1;t<=31;t++)e.push(r.a.createElement(k,{day:t,key:t}));return e}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement(j,null),r.a.createElement("div",{className:"calendar"},this.renderInputs())))}}]),t}(a.Component),T=Object(O.b)((function(e){return{user:e.user}}))(_),D=function(e){return r.a.createElement("button",null,"LOGIN")},C=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"TimeKeeper Calculator"))},I=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},n.handleOnChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.fetchUser({name:n.state.name},n.props.history)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{id:"sign_up_in"},r.a.createElement("div",{id:"sign_up"},r.a.createElement("input",{type:"text",name:"name",id:"sign_in_user",placeholder:"Log In",onChange:this.handleOnChange}),r.a.createElement(D,{id:"submit_user"})))))}}]),t}(a.Component),S=Object(O.b)((function(e){return{user:e.user}}),{fetchUser:function(e,t){return function(n){fetch(E+"/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){n({type:"FETCH_USER",payload:e}),localStorage.setItem("loggedInUserID",e.id),t.push("/calendar")}))}}})(Object(g.e)(I)),U=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(S,null)}}]),t}(a.Component),A=(n(40),n(41),function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("loggedInUserID");if(!e)return this.props.history.push("/");this.props.checkForUser(e,this.props.history)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{exact:!0,path:"/",component:U}),r.a.createElement(g.a,{exact:!0,path:"/calendar",component:T}))}}]),t}(a.Component)),w=Object(O.b)(null,{checkForUser:function(e,t){return console.log("CHECKING FOR USER"),function(n){fetch("".concat(E,"/users/").concat(e)).then((function(e){return e.json()})).then((function(e){return t.push("/calendar"),console.log(t),n({type:"CHECK_LOGGED_USER",payload:e})})).catch((function(e){console.log(e)}))}}})(Object(g.e)(A)),N={user:null};var P=n(15),M=n(18),L=n(29),R=Object(M.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(console.log(e,t),t.type){case"ADD_TIME":return console.log(e),{user:t.payload};case"UPDATE_TIME":case"DELETE_TIME":case"CHECK_LOGGED_USER":case"FETCH_USER":return{user:t.payload};case"LOGOUT_USER":return N;default:return e}}),Object(M.a)(L.a));o.a.render(r.a.createElement(O.a,{store:R},r.a.createElement(P.a,null,r.a.createElement(w,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.6d3e42ac.chunk.js.map